{% extends "base.html" %}

{% block title %}Carrito | Super Merengones{% endblock title %}

{% load humanize %}
{% block content %}
<style>
	.cart-header {
		background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
		color: white;
		padding: 40px 20px;
		border-radius: 12px;
		margin-bottom: 40px;
		text-align: center;
	}

	.cart-header h1 {
		font-family: 'Playfair Display', serif;
		font-size: 2.2rem;
		margin-bottom: 10px;
	}

	.cart-container {
		display: grid;
		grid-template-columns: 1fr 350px;
		gap: 30px;
		margin-bottom: 40px;
	}

	.cart-items {
		background: white;
		border-radius: 12px;
		padding: 25px;
		box-shadow: 0 2px 8px rgba(0,0,0,0.08);
	}

	.cart-item {
		display: grid;
		grid-template-columns: 120px 1fr 100px 80px;
		gap: 20px;
		align-items: center;
		padding: 20px;
		border-bottom: 1px solid var(--border);
		transition: background 0.3s ease;
	}

	.cart-item:hover {
		background: var(--light-2);
		border-radius: 8px;
	}

	.cart-item:last-child {
		border-bottom: none;
	}

	.item-image {
		width: 100px;
		height: 100px;
		background: linear-gradient(135deg, #f5e6eb 0%, #ffe6f0 100%);
		border-radius: 8px;
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 2.5rem;
	}

	.item-info h3 {
		color: var(--dark);
		margin-bottom: 8px;
		font-size: 1.1rem;
		font-weight: 700;
	}

	.item-price {
		color: var(--primary);
		font-weight: 700;
		font-size: 1.1rem;
	}

	.item-quantity {
		display: flex;
		align-items: center;
		gap: 8px;
		border: 1px solid var(--border);
		border-radius: 6px;
		padding: 4px 8px;
		background: white;
	}

	.item-quantity button {
		background: none;
		border: none;
		cursor: pointer;
		color: var(--primary);
		font-weight: 700;
		padding: 4px 8px;
	}

	.item-quantity input {
		width: 40px;
		text-align: center;
		border: none;
		background: transparent;
	}

	.item-total {
		text-align: right;
		font-weight: 700;
		color: var(--dark);
		font-size: 1.1rem;
	}

	.empty-cart {
		text-align: center;
		padding: 80px 20px;
		background: white;
		border-radius: 12px;
	}

	.empty-cart-icon {
		font-size: 4rem;
		margin-bottom: 20px;
	}

	.empty-cart h2 {
		color: var(--dark);
		margin-bottom: 10px;
	}

	.empty-cart p {
		color: var(--text);
		margin-bottom: 25px;
	}

	.cart-summary {
		background: white;
		border-radius: 12px;
		padding: 25px;
		box-shadow: 0 2px 8px rgba(0,0,0,0.08);
		height: fit-content;
		position: sticky;
		top: 100px;
	}

	.summary-title {
		font-size: 1.2rem;
		font-weight: 700;
		color: var(--dark);
		margin-bottom: 20px;
		border-bottom: 2px solid var(--border);
		padding-bottom: 15px;
	}

	.summary-row {
		display: flex;
		justify-content: space-between;
		margin-bottom: 12px;
		color: var(--text);
		font-size: 0.95rem;
	}

	.summary-row.total {
		margin-top: 20px;
		padding-top: 20px;
		border-top: 2px solid var(--border);
		font-size: 1.3rem;
		font-weight: 700;
		color: var(--primary);
	}

	.cart-actions {
		display: flex;
		flex-direction: column;
		gap: 12px;
		margin-top: 25px;
	}

	.cart-actions .btn {
		width: 100%;
		text-align: center;
		padding: 12px;
	}

	.continue-shopping {
		background: var(--light);
		color: var(--primary);
		border: 2px solid var(--primary);
	}

	/* Responsive */
	@media (max-width: 768px) {
		.cart-container {
			grid-template-columns: 1fr;
		}

		.cart-item {
			grid-template-columns: 80px 1fr;
			gap: 15px;
		}

		.item-quantity,
		.item-total {
			grid-column: 2;
		}

		.cart-summary {
			position: static;
		}

		.cart-header h1 {
			font-size: 1.8rem;
		}
	}
</style>

<div class="cart-header">
	<h1>üõí Tu Carrito de Compras</h1>
</div>

{% if items %}
	<div class="cart-container">
		<div class="cart-items">
			{% for it in items %}
				<div class="cart-item">
					<div class="item-image">üç∞</div>
					<div class="item-info">
						<h3>{{ it.product.name }}</h3>
						<div class="item-price">${{ it.product.price|intcomma }}</div>
					</div>
					<div class="item-quantity">
						<button>‚àí</button>
						<input type="number" value="{{ it.quantity }}" readonly>
						<button>+</button>
					</div>
					<div class="item-total">${{ it.total|intcomma }}</div>
				</div>
			{% endfor %}
		</div>

		<div class="cart-summary">
			<div class="summary-title">Resumen de Compra</div>
			
			<div class="summary-row">
				<span>Subtotal:</span>
				<span>${{ subtotal|default:0|intcomma }}</span>
			</div>
			<div class="summary-row">
				<span>Env√≠o:</span>
				<span>$0.00</span>
			</div>
			<div class="summary-row">
				<span>Impuestos:</span>
				<span>${{ tax|default:0|intcomma }}</span>
			</div>

			<div class="summary-row total">
				<span>Total:</span>
				<span>${{ total|default:0|intcomma }}</span>
			</div>

			<div class="cart-actions">
				<a href="{% url 'pedido_crear' %}" class="btn btn-primary">Proceder al Checkout</a>
				<a href="{% url 'productos' %}" class="btn continue-shopping">Seguir Comprando</a>
			</div>
		</div>
	</div>

	<div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 16px; color: #155724; margin-bottom: 20px;">
		<strong>‚úì Env√≠o r√°pido disponible</strong> - Recibe tu pedido en nuestras sedes o a domicilio
	</div>

{% else %}
	<div class="empty-cart">
		<div class="empty-cart-icon">üõí</div>
		<h2>Tu carrito est√° vac√≠o</h2>
		<p>¬°A√∫n no has agregado ning√∫n mereng√≥n a tu carrito!</p>
		<a href="{% url 'productos' %}" class="btn btn-primary" style="display: inline-block; margin-top: 20px;">Explorar Productos</a>
	</div>
{% endif %}

{% endblock content %}
